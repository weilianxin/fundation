# PHP为后台的网站勘察

## 1、判断数据库类型、版本号，php版本号和所用框架

**判断数据库方式**
myisam是mysql5.7及之后版本，数据库文件夹里全是.frm .MYD .MYI；
这种可以直接添加数据库。
InnoDB是mysql5.6及之前版本，数据库文件夹里全式.frm .ibd；
这种需要全量还原。

**数据库导出方式**
mysqldump命令：mysqldump -h127.0.0.1 -uroot -p --databases ff > /ff.sql（注意不需要进入到mysql当中）
Navicat导出 界面操作导出

## 2、宝塔建站及网络设置

**1、配置宝塔环境**
双击btserver.vmx文件打开虚拟机之后，根据数据库版本，打开快照（虚拟机-快照-快照管理器-选择相应快照）练习是打开mysql57快照

开机后登录账号密码：root 123456
bt default查看宝塔环境的信息，包含面板（宝塔系统）的url和面板的账号密码，
ifconfig可以查看ip地址

**2、宝塔面板勘验操作**
注意：宝塔面板，回收站，backup/database有可能有数据库
点击文件，在根目录搜索userinfo.json 内包含宝塔账号信息如绑定的手机号等
搜索default.db 然后下载，用db browser打开，选择browse data栏，logs表，包含宝塔系统日志

**2、上传数据库和源码**
点击文件侧栏，在www/wwwroot/里面把网站源码zip包上传文件到这（无需解压），然后点击这个zip包进行解压；
点击软件商店侧栏，先停止mysql服务；
点击文件侧栏到www/sesrver/data里，删除data文件夹里面的全部内容，到www/server这个目录，选择上传目录，将数据库解压出来文件夹，上传文件夹里data这个目录，里面包含练习用的多个数据库，上传后会替换宝塔镜像里原来的data文件夹

上传完成后，启动mysql服务，点击数据库侧栏，
点击root密码，修改密码为a123456 **（需要研究要一下为什么要修改成这个）**
然后点击从服务器获取，会获得由上传data目录得到的五个数据库
选择tpshop，点击phpmyadmin就会进入数据库界面
用户名就是root，密码就是刚修改的a123456

然后点击数据库，修改root密码，a123456，
然后点击从服务器获取，获取完之后，点击phpMyadmin，会跳到数据库管理网站
用刚修改的用户名密码登录后，就可以看这个站点的数据库了
选择tpshop数据库，打开tp_admin表，就可以看到网站后台管理系统的登录账号密码了

**3、配置域名访问网站**
点击网站侧边栏，点击添加站点需要配置的有三项：
1.根目录：查找网站源代码wwwroot目录下index.php的位置，这就是根目录
2.域名：配置成tpshop.com，使下面自动生成的根目录和上面根目录一致
3.php版本选56
运行目录就是index.php的位置
然后修改host文件 加上在末尾192.168.207.128 tpshop.com
然后点击tpshop.com进入首页

**4、进入后台管理页面**
找到admin等文件夹的位置
